<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Matematik Ligi YÃ¶netim Sistemi â€” 6. SÄ±nÄ±flar</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .qualified { background-color: #dcfce7 !important; }
    .muted { color:#6b7280; }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
  <div class="container mx-auto px-4 py-6">
    <!-- Header -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <div class="flex items-center justify-center mb-4">
        <div class="text-4xl mr-4">ğŸ’</div>
        <div class="text-center">
          <h1 class="text-3xl font-bold text-indigo-800 mb-2">ğŸ† Matematik Ligi</h1>
          <div class="text-center"><span class="text-gray-600 font-medium text-xl">6. SÄ±nÄ±flar Grup AÅŸamasÄ±</span></div>
        </div>
        <div class="text-4xl ml-4">ğŸ“š</div>
      </div>
      <div class="flex justify-center items-center space-x-4 text-2xl">
        <span>âœï¸</span><span>ğŸ“</span><span>ğŸ§®</span><span>ğŸ“</span><span>ğŸ“</span><span>ğŸ”¢</span><span>â•</span><span>â–</span><span>âœ–ï¸</span><span>â—</span>
      </div>
    </div>

    <!-- Navigation Tabs -->
    <div class="bg-white rounded-lg shadow-lg mb-6">
      <div class="flex flex-wrap border-b">
        <button onclick="showTab('standings', this)" class="tab-btn px-4 py-3 font-medium text-indigo-600 border-b-2 border-indigo-600">ğŸ“Š Puan Durumu</button>
        <button onclick="showTab('fixtures', this)" class="tab-btn px-4 py-3 font-medium text-gray-500 hover:text-indigo-600">ğŸ“… FikstÃ¼r</button>
        <button onclick="showTab('upcoming', this)" class="tab-btn px-4 py-3 font-medium text-gray-500 hover:text-indigo-600">â­ï¸ Gelecek MaÃ§</button>
      </div>
    </div>

    <!-- Standings Tab -->
    <div id="standings" class="tab-content active">
      <div class="bg-white rounded-lg shadow-lg p-6">
        <h2 class="text-2xl font-bold mb-4 text-gray-800">Puan Durumu</h2>
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-2">Grup SeÃ§:</label>
          <select id="standingsGroupSelect" onchange="showStandings()" class="border border-gray-300 rounded-lg px-3 py-2">
            <option value="">Grup seÃ§in...</option>
          </select>
        </div>
        <div id="standingsContent"></div>
      </div>
    </div>

    <!-- Fixtures Tab -->
    <div id="fixtures" class="tab-content">
      <div class="bg-white rounded-lg shadow-lg p-6">
        <h2 class="text-2xl font-bold mb-4 text-gray-800">FikstÃ¼r ve SonuÃ§lar</h2>
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-2">Grup SeÃ§:</label>
          <select id="fixtureGroupSelect" onchange="showFixtures()" class="border border-gray-300 rounded-lg px-3 py-2">
            <option value="">Grup seÃ§in...</option>
          </select>
        </div>
        <div class="mb-4 flex gap-2">
          <button onclick="downloadBackup()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg text-sm">ğŸ’¾ YedeÄŸi Ä°ndir</button>
          <label class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg text-sm cursor-pointer">ğŸ“¤ Yedekten YÃ¼kle
            <input type="file" id="restoreInput" accept="application/json" class="hidden" onchange="restoreFromFile(event)" />
          </label>
        </div>
        <div id="fixtureContent"></div>
      </div>
    </div>

    <!-- Upcoming Tab -->
    <div id="upcoming" class="tab-content">
      <div class="bg-white rounded-lg shadow-lg p-6">
        <h2 class="text-2xl font-bold mb-4 text-gray-800">â­ï¸ Gelecek MaÃ§lar</h2>
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-2">Hafta SeÃ§:</label>
          <select id="upcomingWeekSelect" class="border border-gray-300 rounded-lg px-3 py-2" onchange="showUpcoming()">
            <!-- JS dolduracak -->
          </select>
        </div>
        <div id="upcomingContent"></div>
      </div>
    </div>
  </div>

  <script>
    // -------------------- Veri Modeli --------------------
    let leagueData = { groups: {}, fixtures: {}, results: {} };

    // -------------------- Kaydet / YÃ¼kle --------------------
    function saveData() {
      try {
        localStorage.setItem('mathLeagueData', JSON.stringify(leagueData));
        createDownloadableBackup();
      } catch (e) {
        console.error('Veri kaydetme hatasÄ±:', e);
        alert('âŒ Veriler kaydedilemedi!');
      }
    }

    function loadData() {
      const saved = localStorage.getItem('mathLeagueData');
      if (saved) {
        try { leagueData = JSON.parse(saved) || leagueData; }
        catch (e) { console.error('Veri yÃ¼kleme hatasÄ±', e); leagueData = { groups: {}, fixtures: {}, results: {} }; }
      } else {
        // Ä°lk kez: Ã¶rnek gruplarÄ± yÃ¼kle
        initializeWithSampleData();
        saveData();
      }
      initializeGroups();
      populateGroupSelects();
      ensureAllFixtures();
    }

    function createDownloadableBackup() {
      const dataStr = JSON.stringify(leagueData, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      let a = document.getElementById('downloadBackup');
      if (!a) { a = document.createElement('a'); a.id = 'downloadBackup'; a.style.display = 'none'; document.body.appendChild(a); }
      a.href = URL.createObjectURL(dataBlob);
      a.download = `matematik_ligi_yedek_${new Date().toISOString().slice(0,10)}.json`;
    }
    function downloadBackup(){ const a=document.getElementById('downloadBackup'); if(a) a.click(); }
    function restoreFromFile(ev){
      const f = ev.target.files?.[0]; if(!f) return;
      const reader = new FileReader();
      reader.onload = () => {
        try {
          const obj = JSON.parse(reader.result);
          if (obj && obj.groups && obj.fixtures && obj.results) {
            leagueData = obj; saveData();
            initializeGroups(); populateGroupSelects(); ensureAllFixtures();
            showFixtures(); showStandings(); showUpcoming();
            alert('âœ… Yedekten geri yÃ¼klendi');
          } else { alert('âŒ GeÃ§ersiz yedek dosyasÄ±'); }
        } catch { alert('âŒ Dosya okunamadÄ±'); }
        ev.target.value = '';
      };
      reader.readAsText(f);
    }

    // -------------------- Ã–rnek Gruplar --------------------
    function initializeWithSampleData() {
      leagueData.groups['A'] = ['BADE ÅAHÄ°N','MEHMET YAMAN MUMCU','KERÄ°M MERT POLAT','PARS ERTAÅ','MERT RIZGAR YEÅÄ°LMEN','ELÄ°F SARE GENÃ‡ALP','MERT ALÄ° ÃœNLÃœ','KEREM SAYAR'];
      leagueData.groups['B'] = ['MÄ°RA TEMÃœR','KUZEY PEKÅEN','YUSUF GÃ–KALP SAKARYA','LÄ°LA ERGÃœN','DURU MÄ°RA Ã–DÃœL','DEMÄ°R ALÄ° KABAKTAÅ','EVÄ°N Ä°PEK Ã–ZGEN','EFE Ã‡AÄLAR'];
      leagueData.groups['C'] = ['CEM AKDENÄ°Z','AYBÃœKE ÃœZE','ABDULLAH EFE Ã–ZTÃœRK','EMÄ°R MÄ°RAS','KIVANÃ‡ KARABULUT','EFE ATTEPE','ZUHAL UMAY Ã‡ETÄ°N','ALÄ° DEMÄ°R Ã‡ABUK'];
      leagueData.groups['D'] = ['SELÄ°M SANCAK','BATU ÅAHÄ°N','ARVEN TÃœRK','TAN SOYÃ–Z','DERÄ°N DEMÄ°RKAYA','EYMEN Ã–ZDEMÄ°R','MERT RIFAT Ã‡EBÄ°','ELÄ°F ADRÄ°ANA OKUR'];
      leagueData.groups['E'] = ['MELÄ°S MÄ°RA OSMANBAÅ','DURU KÃœÃ‡ÃœKSÃœMBÃœL','HALÄ°L Ä°BRAHÄ°M BAYSOY','TANEM DENÄ°Z MERTLER','POYRAZ ÃœNGÃœDER','RABÄ°A BAHAR Ã‡AN','Ä°NCÄ° JANSELÄ° KAVAL','BARIÅ TOKGÃ–Z'];
      leagueData.groups['F'] = ['SELEN IÅIK','AYSAN SEIFZADEH','DENÄ°Z Ã‡AKIR','DOÄUKAN KILIÃ‡','DOÄUKAN ARSLAN','ALÄ° KAAN MERCAN','MEHMET Ã‡AÄAN KIZILOÄLU','ALYA SENA Ã‡Ä°Ã‡EK'];
      leagueData.groups['G'] = ['EMÄ°RCAN RAHÄ°MOÄLU','SARP BALCIOÄLU','BATU DURUKAN','ELÄ°S TEKE','KENAN SARP Ã‡Ã–TE','SEVÄ°NÃ‡ ECE BÄ°LGÄ°Ã‡','NASRÄ° Ã‡Ä°Ã‡EK','CEVDET AKÄ°F TOKLU'];
      leagueData.groups['H'] = ['ARHAN AKARSU','ANIL CANSU YILMAZ','ASYA MÄ°NA Ã–Z','AYÅE Ã–YKÃœ YILDIRIM','MÄ°RA GÃ–ZENER','NÄ°L ERSAN','KEREM TEKÄ°N','DERÄ°N SINEF DÄ°N'];
      leagueData.groups['I'] = ['YAÄMUR ELÄ°F BÄ°NGÃ–L','CANSU YILMAZ','ATLAS BAHADIR','MÄ°RA Ä°NECÄ°','BERAT AÄIRMAN','KEREM Ã–ZTÃœRK','CEMAL SALMANLI','ARES DOÄAN'];
      leagueData.groups['J'] = ['DERÄ°N BOZKURT','ASYA KARAMAN','DENÄ°Z GÃ–KSU','BELÄ°Z SU BAÅARSLAN','YUSUF EFE KARAGÃ–ZOÄLU','Ä°PEK NÄ°SA KOÃ‡BAY','Ä°PEK PAPÄ°N','PELÄ°N USTA'];
      leagueData.groups['K'] = ['SARP SALÄ°HOÄLU','SARE YILMAZ','KUZEY MERT YILMAZ','ZEYNEP ARSLAN','BARDIA ESHRATABADY','ERDAL ATÄ°LLA ÅAKAR','MÄ°RZA Ã–ZBEKLÄ°','AYAZ ALÄ° YILDIRIM'];
      leagueData.groups['L'] = ['BERKEN AREL AYAZ','Ã–MER KALEBAÅ','ECE NUR EGE','KERÄ°M KARKIN','EGEMEN Ã‡ALIÅKAN','YAÄIZ AVCI','DERÄ°N YALÃ‡INKAYA','ATLAS DENÄ°Z Ã‡ELÄ°K'];
      leagueData.groups['M'] = ['DENÄ°Z EROL BAÅARSLAN','Ã–YKÃœ CAP','ECE KÃœÃ‡ÃœKDALGIÃ‡','NAZLI USKUÃ‡','KAYRA GÃ–ZÃœBÃœYÃœK','YAÅAR YAMAN YOLCU','Ä°LAY MELEK MEYDAN','AYÅE SERRA KARTAL'];
      leagueData.groups['N'] = ['ALP ALTINTAÅ','ADA ERAKPINAR','BADE SEZGÄ°N','DORUK DOÄAN','DURU SAÄDIÃ‡','ELA YILMAZ'];
    }

    // -------------------- YardÄ±mcÄ±lar --------------------
    function allGroupLetters(){ return 'ABCDEFGHIJKLMN'.split(''); }

    function initializeGroups() {
      allGroupLetters().forEach(letter => {
        const cap = letter === 'N' ? 6 : 8;
        if (!leagueData.groups[letter]) leagueData.groups[letter] = Array(cap).fill('');
      });
    }

    function populateGroupSelects() {
      const fixtureSelect = document.getElementById('fixtureGroupSelect');
      const standingsSelect = document.getElementById('standingsGroupSelect');
      fixtureSelect.innerHTML = '<option value="">Grup seÃ§in...</option>';
      standingsSelect.innerHTML = '<option value="">Grup seÃ§in...</option>';
      allGroupLetters().forEach(g => {
        const hasMember = (leagueData.groups[g]||[]).some(n => n && n.trim() !== '');
        if (hasMember) {
          const o1 = document.createElement('option'); o1.value = g; o1.textContent = 'Grup ' + g; fixtureSelect.appendChild(o1);
          const o2 = document.createElement('option'); o2.value = g; o2.textContent = 'Grup ' + g; standingsSelect.appendChild(o2);
        }
      });
    }

    function generateFixtures(group) {
      const members = (leagueData.groups[group] || []).filter(m => m.trim() !== '');
      const n = members.length; if (n < 2) return [];
      const fixtures = []; const totalWeeks = n % 2 === 0 ? n - 1 : n;
      for (let w = 1; w <= totalWeeks; w++) fixtures.push({ week: w, matches: [] });
      let matchId = 0; const allMatches = [];
      for (let i = 0; i < n; i++) for (let j = i + 1; j < n; j++) allMatches.push({ id: `${group}_${matchId++}`, home: members[i], away: members[j] });
      let wi = 0; for (const m of allMatches) {
        let placed = false, tries = 0;
        while (!placed && tries < totalWeeks) {
          const week = fixtures[wi];
          const used = new Set(); week.matches.forEach(x => { used.add(x.home); used.add(x.away); });
          if (!used.has(m.home) && !used.has(m.away)) { week.matches.push({ ...m }); placed = true; }
          wi = (wi + 1) % totalWeeks; tries++;
        }
      }
      return fixtures;
    }

    function ensureFixturesForGroup(g){
      if (!leagueData.fixtures[g] || !leagueData.fixtures[g].length){
        leagueData.fixtures[g] = generateFixtures(g);
      }
    }

    function ensureAllFixtures(){
      allGroupLetters().forEach(g => ensureFixturesForGroup(g));
      // upcoming haftalarÄ± doldur
      populateUpcomingWeekSelect();
    }

    // -------------------- FikstÃ¼r / SonuÃ§ GiriÅŸi --------------------
    function showFixtures() {
      const group = document.getElementById('fixtureGroupSelect').value;
      const content = document.getElementById('fixtureContent');
      if (!group) { content.innerHTML = '<p class="text-gray-500">LÃ¼tfen bir grup seÃ§in.</p>'; return; }
      ensureFixturesForGroup(group);
      const fixtures = leagueData.fixtures[group];
      content.innerHTML = `
        <div class="space-y-6">
          ${fixtures.map(week => `
            <div class="border border-gray-200 rounded-lg p-4">
              <h3 class="font-bold text-lg mb-3 text-indigo-700">${week.week}. Hafta</h3>
              <div class="space-y-2">
                ${week.matches.map(match => `
                  <div class="flex items-center space-x-2 bg-gray-50 p-3 rounded">
                    <span class="flex-1 text-right font-medium">${match.home}</span>
                    <input type="number" value="${leagueData.results[match.id]?.homeScore ?? ''}"
                           onchange="updateScore('${match.id}','homeScore',this.value)"
                           class="w-12 text-center border border-gray-300 rounded px-2 py-1">
                    <span class="text-gray-500">-</span>
                    <input type="number" value="${leagueData.results[match.id]?.awayScore ?? ''}"
                           onchange="updateScore('${match.id}','awayScore',this.value)"
                           class="w-12 text-center border border-gray-300 rounded px-2 py-1">
                    <span class="flex-1 font-medium">${match.away}</span>
                  </div>
                `).join('')}
              </div>
            </div>
          `).join('')}
        </div>`;
    }

    function updateScore(matchId, key, val) {
      if (!leagueData.results[matchId]) leagueData.results[matchId] = {};
      leagueData.results[matchId][key] = val === '' ? '' : (parseInt(val) || 0);
      saveData();
      const group = matchId.split('_')[0];
      if (document.getElementById('standingsGroupSelect').value === group) showStandings();
      // Gelecek maÃ§ gÃ¶rÃ¼nÃ¼mÃ¼ aÃ§Ä±k ise skor parantezlerini tazele
      if (document.getElementById('upcoming').classList.contains('active')) showUpcoming();
    }

    // -------------------- Puan Durumu --------------------
    function calculateStandings(group) {
      const members = (leagueData.groups[group] || []).filter(m => m.trim() !== '');
      const standings = members.map(member => ({ name: member, played: 0, won: 0, drawn: 0, lost: 0, correct: 0, wrong: 0, goalDifference: 0, points: 0 }));
      Object.keys(leagueData.results).forEach(matchId => {
        if (!matchId.startsWith(group + '_')) return;
        const result = leagueData.results[matchId];
        if (result.homeScore === '' || result.awayScore === '' || result.homeScore == null || result.awayScore == null) return;
        const homeScore = parseInt(result.homeScore) || 0;
        const awayScore = parseInt(result.awayScore) || 0;
        const fixtures = leagueData.fixtures[group] || [];
        let homeTeam, awayTeam;
        fixtures.forEach(week => week.matches.forEach(match => { if (match.id === matchId) { homeTeam = match.home; awayTeam = match.away; } }));
        if (!homeTeam || !awayTeam) return;
        const homeIndex = standings.findIndex(s => s.name === homeTeam);
        const awayIndex = standings.findIndex(s => s.name === awayTeam);
        if (homeIndex === -1 || awayIndex === -1) return;
        standings[homeIndex].played++; standings[awayIndex].played++;
        standings[homeIndex].correct += homeScore; standings[homeIndex].wrong += awayScore;
        standings[awayIndex].correct += awayScore; standings[awayIndex].wrong += homeScore;
        if (homeScore > awayScore) { standings[homeIndex].won++; standings[homeIndex].points += 3; standings[awayIndex].lost++; }
        else if (homeScore < awayScore) { standings[awayIndex].won++; standings[awayIndex].points += 3; standings[homeIndex].lost++; }
        else { standings[homeIndex].drawn++; standings[awayIndex].drawn++; standings[homeIndex].points++; standings[awayIndex].points++; }
        standings[homeIndex].goalDifference = standings[homeIndex].correct - standings[homeIndex].wrong;
        standings[awayIndex].goalDifference = standings[awayIndex].correct - standings[awayIndex].wrong;
      });
      standings.sort((a, b) => (b.points - a.points) || (b.goalDifference - a.goalDifference) || (b.correct - a.correct));
      return standings;
    }

    function showStandings() {
      const group = document.getElementById('standingsGroupSelect').value;
      const content = document.getElementById('standingsContent');
      if (!group) { content.innerHTML = '<p class="text-gray-500">LÃ¼tfen bir grup seÃ§in.</p>'; return; }
      const standings = calculateStandings(group);
      const qualifyCount = group === 'N' ? 3 : 4;
      content.innerHTML = `
        <div class="overflow-x-auto">
          <table class="w-full border-collapse border border-gray-300">
            <thead>
              <tr class="bg-indigo-600 text-white">
                <th class="border px-3 py-2 text-left">SÄ±ra</th>
                <th class="border px-3 py-2 text-left">Ã–ÄŸrenci</th>
                <th class="border px-3 py-2 text-center">O</th>
                <th class="border px-3 py-2 text-center">G</th>
                <th class="border px-3 py-2 text-center">B</th>
                <th class="border px-3 py-2 text-center">M</th>
                <th class="border px-3 py-2 text-center">P</th>
              </tr>
            </thead>
            <tbody>
              ${standings.map((team, i) => `
                <tr class="${i < qualifyCount ? 'qualified' : ''}">
                  <td class="border px-3 py-2 font-bold">${i + 1}</td>
                  <td class="border px-3 py-2 font-medium">${team.name}</td>
                  <td class="border px-3 py-2 text-center">${team.played}</td>
                  <td class="border px-3 py-2 text-center">${team.won}</td>
                  <td class="border px-3 py-2 text-center">${team.drawn}</td>
                  <td class="border px-3 py-2 text-center">${team.lost}</td>
                  <td class="border px-3 py-2 text-center font-bold">${team.points}</td>
                </tr>`).join('')}
            </tbody>
          </table>
          <div class="mt-4 text-sm text-gray-600"><div class="flex items-center space-x-2"><div class="w-4 h-4 bg-green-200 border border-green-300"></div><span>Bir sonraki tura Ã§Ä±kan Ã¶ÄŸrenciler (Ä°lk ${qualifyCount})</span></div></div>
        </div>`;
    }

    // -------------------- Gelecek MaÃ§lar --------------------
    function getMaxWeeksAcrossGroups(){
      // her grubun hafta sayÄ±sÄ±: n Ã§iftse n-1, tekse n
      let maxW = 0;
      allGroupLetters().forEach(g=>{
        ensureFixturesForGroup(g);
        const m = (leagueData.fixtures[g]||[]).length;
        if (m > maxW) maxW = m;
      });
      return maxW;
    }

    function populateUpcomingWeekSelect(){
      const sel = document.getElementById('upcomingWeekSelect');
      if (!sel) return;
      const maxWeeks = getMaxWeeksAcrossGroups();
      const prev = sel.value || '1';
      sel.innerHTML = '';
      for (let w=1; w<=maxWeeks; w++){
        const opt = document.createElement('option');
        opt.value = String(w);
        opt.textContent = `${w}. Hafta`;
        sel.appendChild(opt);
      }
      // eski seÃ§im uygunsa koru
      if (+prev >=1 && +prev <= maxWeeks) sel.value = prev;
      else sel.value = '1';
    }

    function showUpcoming(){
      ensureAllFixtures();
      populateUpcomingWeekSelect();
      const sel = document.getElementById('upcomingWeekSelect');
      const week = parseInt(sel.value, 10) || 1;
      const area = document.getElementById('upcomingContent');

      let html = '';
      allGroupLetters().forEach(g=>{
        const weeks = leagueData.fixtures[g] || [];
        const w = weeks.find(x=>x.week===week);
        if (!w || !w.matches || !w.matches.length) return;
        html += `
          <div class="mb-5 border border-gray-200 rounded-lg">
            <div class="px-4 py-2 bg-indigo-50 font-semibold text-indigo-800">Grup ${g} â€” ${week}. Hafta</div>
            <div class="p-3 space-y-2">
              ${w.matches.map(m=>{
                const res = leagueData.results[m.id];
                const hasScore = res && res.homeScore !== '' && res.homeScore != null && res.awayScore !== '' && res.awayScore != null;
                const scoreText = hasScore ? ` <span class="muted">( ${res.homeScore} - ${res.awayScore} )</span>` : '';
                return `<div class="flex items-center justify-between bg-gray-50 px-3 py-2 rounded">
                  <span class="flex-1 text-right font-medium">${m.home}</span>
                  <span class="px-2 text-gray-500">-</span>
                  <span class="flex-1 font-medium">${m.away}</span>
                  ${scoreText}
                </div>`;
              }).join('')}
            </div>
          </div>`;
      });

      if (!html){
        html = `<div class="text-gray-500">Bu hafta iÃ§in gÃ¶sterilecek maÃ§ bulunamadÄ±.</div>`;
      }
      area.innerHTML = html;
    }

    // -------------------- Sekmeler --------------------
    function showTab(tabName, btn) {
      document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
      document.getElementById(tabName).classList.add('active');
      document.querySelectorAll('.tab-btn').forEach(b => { b.classList.remove('text-indigo-600','border-b-2','border-indigo-600'); b.classList.add('text-gray-500'); });
      if (btn) { btn.classList.remove('text-gray-500'); btn.classList.add('text-indigo-600','border-b-2','border-indigo-600'); }
      if (tabName === 'standings') showStandings();
      if (tabName === 'fixtures') showFixtures();
      if (tabName === 'upcoming') showUpcoming();
    }

    // -------------------- Init --------------------
    document.addEventListener('DOMContentLoaded', () => {
      loadData();
      createDownloadableBackup();

      // Puan Durumu iÃ§in ilk uygun grubu seÃ§elim
      const sel = document.getElementById('standingsGroupSelect');
      if (sel && sel.options.length > 1) { sel.selectedIndex = 1; showStandings(); }

      // Gelecek maÃ§ hafta seÃ§eneklerini hazÄ±rla
      populateUpcomingWeekSelect();
    });
  </script>

  <!-- Yedek indirme baÄŸlantÄ±sÄ± (gizli) -->
  <a id="downloadBackup" style="display:none"></a>
</body>
</html>
